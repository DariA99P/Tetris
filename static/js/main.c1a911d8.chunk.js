(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{119:function(e,n,t){e.exports=t(211)},124:function(e,n,t){},125:function(e,n,t){},211:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(3),i=t.n(c),l=(t(124),t(125),t(34)),o=t(20),u=t(35),f=t(4),s=t(5),m=t(214),d=t(79);function p(){var e=Object(f.a)(["\n  margin-top: 16px;\n  border-radius: 4px;\n"]);return p=function(){return e},e}function v(){var e=Object(f.a)(["\n  margin-top: 16px;\n  border-radius: 4px;\n"]);return v=function(){return e},e}function h(){var e=Object(f.a)(["\n  margin-top: 16px;\n  font-size: 24px;\n"]);return h=function(){return e},e}function x(){var e=Object(f.a)(["\n  font-size: 36px;\n"]);return x=function(){return e},e}function E(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 36px;\n  width: 300px;\n  margin-left: 16px;\n"]);return E=function(){return e},e}function g(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  height: 750px;\n  align-items: center;\n"]);return g=function(){return e},e}var y=s.a.div(g()),b=s.a.div(E()),I=s.a.div(x()),w=s.a.div(h()),O=Object(s.a)(m.a)(v()),j=Object(s.a)(d.a)(p()),T=function(){var e=r.useState(localStorage.getItem("userName")||""),n=Object(u.a)(e,2),t=n[0],a=n[1],c=r.useCallback((function(e){return a(e.target.value)}),[]),i=r.useCallback((function(){return localStorage.setItem("userName",t)}),[t]);return r.createElement(y,null,r.createElement(b,null,r.createElement(I,null,"Tetris"),r.createElement(w,null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0435 \u0438\u043c\u044f:"),r.createElement(O,{value:t,onChange:c,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"}),r.createElement(l.b,{to:{pathname:"/tetris"}},r.createElement(j,{type:"primary",onClick:i},"\u0412\u043e\u0439\u0442\u0438"))))},k=t(55),S=t.n(k),C=t(216);function F(){var e=Object(f.a)(["\n  width: 200px;\n  margin-top: 16px;\n"]);return F=function(){return e},e}function B(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 500px;\n  align-items: center;\n"]);return B=function(){return e},e}function R(){var e=Object(f.a)(["\n  display: flex;\n  margin: 0 auto;\n"]);return R=function(){return e},e}function L(){var e=Object(f.a)(["\n  font-size: 24px;\n  cursor: pointer;\n"]);return L=function(){return e},e}function M(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 16px;\n"]);return M=function(){return e},e}function N(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]);return N=function(){return e},e}var H,J,A=s.a.div(N()),P=s.a.div(M()),W=Object(s.a)(C.a)(L()),z=s.a.div(R()),D=s.a.div(B()),G=Object(s.a)(d.a)(F()),U=t(215),Z=function(){return a.a.createElement(P,null,a.a.createElement("div",null),a.a.createElement(I,null,"Tetris"),a.a.createElement(U.a,{placement:"leftTop",title:"Home Page"},a.a.createElement(l.b,{to:{pathname:"/"}},a.a.createElement(W,null))))};!function(e){e[e.T=0]="T",e[e.O=1]="O",e[e.L=2]="L",e[e.J=3]="J",e[e.I=4]="I",e[e.S=5]="S",e[e.Z=6]="Z"}(H||(H={})),function(e){e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN"}(J||(J={}));var $=[null,"#F4E334","#F47134","#34D7F4","#F434E5","#5B1E33","#A79BEC","#C90F39"],q=function(e,n){for(var t=[n.matrix,n.pos],r=t[0],a=t[1],c=0;c<r.length;++c)for(var i=0;i<r[c].length;++i)if(0!==r[c][i]&&0!==(e[c+a.y]&&e[c+a.y][i+a.x]))return!0;return!1},K=function(e){switch(e){case H.T:return[[0,0,0],[6,6,6],[0,6,0]];case H.O:return[[2,2],[2,2]];case H.L:return[[0,7,0],[0,7,0],[0,7,7]];case H.J:return[[0,4,0],[0,4,0],[4,4,0]];case H.I:return[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]];case H.S:return[[0,3,3],[3,3,0],[0,0,0]];default:return[[5,5,0],[0,5,5],[0,0,0]]}},Q=function(e,n){for(var t=0;t<e.length;++t)for(var r=0;r<t;++r){var a=[e[t][r],e[r][t]];e[r][t]=a[0],e[t][r]=a[1]}n>0?e.forEach((function(e){return e.reverse()})):e.reverse()},V=function(e,n){var t=e-.5+Math.random()*(n-e+1);return Math.abs(Math.round(t))},X=V(0,6),Y=0,_=function(){var e=document.getElementById("canvasId"),n=e.getContext("2d"),t=document.getElementById("nextFigureId"),r=t.getContext("2d");n.clearRect(0,0,e.width,e.height),n.scale(20,20),r.clearRect(0,0,t.width,t.height),r.scale(20,20);var a,c=function(e,n){for(var t=[];n--;)t.push(new Array(e).fill(0));return t}(15,25),i=0,l={pos:{x:0,y:0},matrix:null,score:0},o=!1,u=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvasId";e.forEach((function(e,c){e.forEach((function(e,i){0!==e&&"canvasId"===a&&(n.fillStyle=$[e],n.fillRect(i+t.x,c+t.y,1,1)),0!==e&&"nextCanvasId"===a&&(r.fillStyle=$[e],r.fillRect(i+t.x,c+t.y,1,1))}))}))},f=function(){var e=document.getElementById("resultId");Y=l.score,e.innerText="\u0421\u0447\u0435\u0442: ".concat(Y)},s=function(){var e=X;X=V(0,6),l.matrix=K(e),l.pos.y=0,l.pos.x=Math.floor(c[0].length/2)-Math.floor(l.matrix[0].length/2),q(c,l)&&(c.forEach((function(e){return e.fill(0)})),o=!1)},m=function(){var e,n;l.pos.y++,q(c,l)&&(l.pos.y--,e=c,(n=l).matrix.forEach((function(t,r){t.forEach((function(t,a){0!==t&&(e[r+n.pos.y][a+n.pos.x]=t)}))})),function(){var e=1;e:for(var n=c.length-1;n>0;--n){for(var t=0;t<c[n].length;++t)if(0===c[n][t])continue e;var r=c.splice(n,1)[0].fill(0);c.unshift(r),++n,l.score+=100*e,e*=2}}(),s(),f())},d=function(e){l.pos.x+=e,q(c,l)&&(l.pos.x-=e)},p=function(){n.fillStyle="#fff",r.fillStyle="#fff",n.fillRect(0,0,e.width,e.height),r.fillRect(0,0,t.width,t.height),f(),u(c,{x:0,y:0}),u(l.matrix,l.pos),u(K(X),{x:3,y:3},"nextCanvasId")},v=function(t){clearInterval(a),n.font="2px Comic Sans MS",n.fillStyle="#000000",n.textAlign="center",n.textBaseline="middle",n.fillText(t,e.width/20/2,e.width/20/2)};v("\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0438\u0433\u0440\u0443"),o&&(s(),p()),document.addEventListener("keydown",(function(e){switch(e.keyCode){case J.LEFT:d(-1);break;case J.UP:!function(e){var n=l.pos.x,t=1;for(Q(l.matrix,e);q(c,l);)if(l.pos.x+=t,(t=-(t+(t>0?1:-1)))>l.matrix[0].length)return Q(l.matrix,-e),void(l.pos.x=n)}(-1);break;case J.RIGHT:d(1);break;default:o&&m()}})),document.getElementById("start").onclick=function(){var e=this;o=!0,s(),a=setInterval((function(){o?(++i>=100&&(m(),i=0),p(),e.disabled=!0):(v("\u0418\u0433\u0440\u0430 \u043e\u043a\u043e\u043d\u0447\u0435\u043d\u0430"),e.disabled=!1)}),10)}},ee=function(){return a.a.useEffect((function(){_()}),[]),a.a.createElement("canvas",{id:"canvasId",width:"300",height:"500",style:{border:"2px solid"}})},ne=function(){return a.a.createElement(z,null,a.a.createElement(D,null,a.a.createElement(w,null,"\u0418\u0433\u0440\u043e\u043a: ".concat(localStorage.getItem("userName")||"")),a.a.createElement(G,{id:"start",type:"primary"},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"),a.a.createElement(w,null,"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u0444\u0438\u0433\u0443\u0440\u0430"),a.a.createElement("canvas",{id:"nextFigureId",width:"200",height:"200",style:{border:"2px solid",marginTop:"8px"}}),a.a.createElement("div",{style:{marginTop:"16px"},id:"resultId"})),a.a.createElement(D,null,a.a.createElement(ee,null)))},te=function(){return a.a.createElement(A,null,a.a.createElement(Z,null),a.a.createElement(ne,null))},re=S.a.Content,ae=function(){return a.a.createElement(l.a,null,a.a.createElement(S.a,{style:{minHeight:"100vh"}},a.a.createElement(S.a,{style:{background:"white"}},a.a.createElement(re,null,a.a.createElement(o.c,null,a.a.createElement(o.a,{exact:!0,path:"/tetris",component:te}),a.a.createElement(o.a,{exact:!0,path:"/",component:T}))))))};var ce=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(ae,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(ce),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.c1a911d8.chunk.js.map